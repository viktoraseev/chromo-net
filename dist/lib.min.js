!function(e,r,t){function n(e){i&&r.trace(e)}function o(){var e=navigator.userAgent,r=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),t=e.match("Edge/([0-9]{1,}[.0-9]{0,})");return{storageEvent:!t,topStorage:!(!r||"11"!=r[1]),blob:!r,msgSize:4e3}}function a(o,a,i){function c(e){var t=e.key;if(t!==d){try{var n=e.newValue,o=JSON.parse(n)}catch(a){return void r.error(a)}o&&(!o.t||o.t&&o.t===d)&&g[t]!==o.c&&(g[t]=o.c,i(o.d,t))}}if(!a)throw new Error("id is not specified");if(!o)throw new Error("channel is not specified");if(!i)throw new Error("onMessage is not specified");var d=o+"-"+a,f=0,g={};this.send=function(e,r){if(r&&0!==r.lastIndexOf(o,0))throw new Error("Message send to wrong channel");var n=JSON.stringify({c:f++,d:e,t:r});t[d]=n},s.topStorage?e.top.addEventListener("storage",c,!1):e.addEventListener("storage",c,!1),n("UdpChannel created ")}var i=!0,s=o();e.ChromonetUdpChannel=a}(window,console,localStorage);